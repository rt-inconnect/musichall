<!DOCTYPE html>
<html lang="en" ng-app="app">
  <head>
    <base href="http://<%- req.host %>/" target="_self">
    <meta charset="utf-8" />
    <title ng-if="!player.nowPlaying.isPlaying"><%- sails.config.params.title %></title>
    <title ng-if="player.nowPlaying.isPlaying">{{player.nowPlaying.name}}</title>
    <meta name="description" content="<%- sails.config.params.description %>" />
    <% if (typeof(track) != 'undefined') { %> <%- SeoService.getMeta(track) %> <% } %>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />


    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link href="favicon3.ico" rel="icon" type="image/x-icon" />

    <!--STYLES-->
    <link rel="stylesheet" href="/styles/flexboxgrid.min.css">
    <link rel="stylesheet" href="/styles/media.css">
    <link rel="stylesheet" href="/styles/app.css">
    <link rel="stylesheet" href="/styles/angular-ui-tree.min.css">
    <link rel="stylesheet" href="/styles/animate.css">
    <link rel="stylesheet" href="/styles/musichalluz.css">
    <!--STYLES END-->

    <!--[if lt IE 9]>
      <script src="js/ie/html5shiv.js"></script>
      <script src="js/ie/respond.min.js"></script>
      <script src="js/ie/excanvas.js"></script>
    <![endif]-->    

    <script type="text/javascript">
      var user_data = <%- JSON.stringify(req.user || {}) %>;
      var token = '<%- FsService.getToken(req.session) %>';
    </script>
  </head>

  <body nv-file-drop="" nv-file-over="" over-class="rt-file-over" uploader="trackUploader.uploader" ng-class="theme">
    <div class="rt-uploading" ng-if="trackUploader.uploadItem.isUploading">
      <span class="rt-uploading-progress" ng-style="{width:trackUploader.uploadItem.allProgress + '%'}"></span>
    </div>

    <p class="rt-file-shadow hidden-xs"><span class="rt-file-shadow-inner"><i class="icon icon-cloud-upload"></i> Загрузить файл</span></p>

    <section class="app" ng-controller="AppController" ng-class="{'hidden-player':!playerVisible}">

      <div style="position: absolute;bottom: 0;top: 0;left: 0;right: 0;"></div>

      <header ng-include src="'/templates/partials/header.html'" class="rt-header row" ng-class="{'expand-search': searchFocused}"></header>

      <aside ng-include src="'/templates/partials/player.html'" class="rt-player rt-player-left" id="player"></aside>

      <section class="content" id="content" ui-view>  <%- body %> </section>

      <a title="Отобразить плеер" href class="rt-show-player btn" ng-click="togglePlayer()" style="display:none;"><i class="icon-music"></i></a>

    </section>    
    <!--
    <div class="system-notifications">
        <div class="alert animated fadeInDown" ng-class="notify.type" ng-repeat="notify in snotifies">
          <button type="button" class="close" ng-click="snotifyClose($index)">×</button>
          <a class="alert-link" ui-sref="track.comments({ id: notify.track.id })">{{ notify.track.name }}</a> {{notify.text}}
        </div>
    </div>
    -->

    <!--
        Client-side Templates
        ========================

        HTML templates are important prerequisites of modern, rich client applications.
        To work their magic, frameworks like Backbone, Angular, Ember, and Knockout require
        that you load these templates client-side.

        By default, your Gruntfile is configured to automatically load and precompile
        client-side JST templates in your `assets/linker/templates` folder, then
        include them here automatically (between TEMPLATES and TEMPLATES END).
        
        To customize this behavior to fit your needs, just edit your Gruntfile.
        For example, here are a few things you could do:

            + Import templates from other directories
            + Use a different template engine (handlebars, jade, dust, etc.)
            + Internationalize your client-side templates using a server-side
              stringfile before they're served.
    -->

    <!--TEMPLATES-->
    <script type="text/javascript" src="/jst.js"></script>
    <!--TEMPLATES END-->


    <!--

      Client-side Javascript
      ========================

      You can always bring in JS files manually with `script` tags, or asynchronously
      on the client using a solution like AMD (RequireJS).  Or, if you like, you can 
      take advantage of Sails' conventional asset pipeline (boilerplate Gruntfile).

      By default, filesin your `assets/linker/js` folder are included here
      automatically (between SCRIPTS and SCRIPTS END).  Both JavaScript (.js) and
      CoffeeScript (.coffee) are supported. In production, your scripts will be minified
      and concatenated into a single file.
      
      To customize any part of the built-in behavior, just edit your Gruntfile.
      For example, here are a few things you could do:
          
          + Change the order of your scripts
          + Import scripts from other directories
          + Use a different preprocessor, like TypeScript

    -->

    <!--SCRIPTS-->
    <script src="/js/dependencies/moment.min.js"></script>
    <script src="/js/dependencies/ru.js"></script>
    <script src="/js/dependencies/jstorage.min.js"></script>
    <script src="/js/dependencies/angular.min.js"></script>
    <script src="/js/dependencies/angular-drag-and-drop-lists.js"></script>
    <script src="/js/dependencies/angular-file-upload.min.js"></script>
    <script src="/js/dependencies/angular-moment.min.js"></script>
    <script src="/js/dependencies/angular-resource.min.js"></script>
    <script src="/js/dependencies/angular-ui-router.min.js"></script>
    <script src="/js/dependencies/notify.dev.js"></script>
    <script src="/js/dependencies/sails.io.js"></script>
    <script src="/js/dependencies/scrollglue.js"></script>
    <script src="/js/dependencies/soundmanager2.js"></script>
    <script src="/js/dependencies/ui-bootstrap-tpls12.min.js"></script>
    <script src="/js/app/app.js"></script>
    <script src="/js/app/controllers.js"></script>
    <script src="/js/app/directives.js"></script>
    <script src="/js/app/filters.js"></script>
    <script src="/js/app/services.js"></script>
    <!--SCRIPTS END-->   

    <!-- START WWW.UZ TOP-RATING --><SCRIPT language="javascript" type="text/javascript">
    <!--
    top_js="1.0";top_r="id=32241&r="+escape(document.referrer)+"&pg="+escape(window.location.href);document.cookie="smart_top=1; path=/"; top_r+="&c="+(document.cookie?"Y":"N")
    //-->
    </SCRIPT>
    <SCRIPT language="javascript1.1" type="text/javascript">
    <!--
    top_js="1.1";top_r+="&j="+(navigator.javaEnabled()?"Y":"N")
    //-->
    </SCRIPT>
    <SCRIPT language="javascript1.2" type="text/javascript">
    <!--
    top_js="1.2";top_r+="&wh="+screen.width+'x'+screen.height+"&px="+
    (((navigator.appName.substring(0,3)=="Mic"))?screen.colorDepth:screen.pixelDepth)
    //-->
    </SCRIPT>
    <SCRIPT language="javascript1.3" type="text/javascript">
    <!--
    top_js="1.3";
    //-->
    </SCRIPT>
    <SCRIPT language="JavaScript" type="text/javascript">
    <!--
    top_rat="&col=340F6E&t=ffffff&p=BD6F6F";top_r+="&js="+top_js+"";document.write('<img src="http://cnt0.www.uz/counter/collect?'+top_r+top_rat+'" width=0 height=0 border=0 style="display:none;" />')//-->
    </SCRIPT><NOSCRIPT><IMG height=0 src="http://cnt0.www.uz/counter/collect?id=32241&pg=http%3A//uzinfocom.uz&col=340F6E&t=ffffff&p=BD6F6F" width=0 border=0 style="display:none;" /></NOSCRIPT><!-- FINISH WWW.UZ TOP-RATING -->  

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-59686153-1', 'auto');
      ga('send', 'pageview');

    </script>
    
  </body>
</html>
